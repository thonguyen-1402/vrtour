<!doctype html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <script src="https://supereggbert.github.io/aframe-htmlembed-component/dist/build.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@4.2.1/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/three@0.131.3/examples/js/loaders/TDSLoader.js"></script>
    <script src="https://unpkg.com/aframe-animation-component@^4.1.2/dist/aframe-animation-component.min.js"></script>
    <script src ="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
    <script src ="https://unpkg.com/aframe-extras@6.1.0/dist/aframe-extras.min.js" ></script>

    <script src="./index.js"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    
  
    <script src="https://cdn.jsdelivr.net/npm/pannellum/build/pannellum.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum/build/pannellum.css">
    <script src="https://unpkg.com/pannellum/build/pannellum.js"></script>
    
    <link rel="stylesheet" href="./WEBVR/style.css"> 
    <script src="./WEBVR/script.js" defer></script>

    <title> HUST CAMPUS TOUR </title>

</head>
   <style>
     .text span {
   opacity: 0;
}
.text span.revealed {
   opacity: 1;
}
.text span.green {
   color: #27ae60;
}
.text span.red {
   color: #ff0000;
}

.text {
   font-size: 6vw;
   word-spacing: 0.2em;
   margin: 0 auto;
   background: #fff;
   padding: 1em;
   border-bottom: 1vw solid #0e6dad;
   position:relative;
   line-height: 1.2em;
}
.corner {
   position:absolute;
   width: 10vw;
   right:2vw;
   bottom:0;
   transform: translateY(80%);
}




    body{
      font-family: 'Roboto', sans-serif;
      text-shadow: 0px 0px 10px #00d2ff;
      color: #fff;
      font-size: 32px;
      margin: 0;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
          }

    h1{
      font-size: 52px;
    }
    .dark{
      background-color: rgba(0,0,0,0.2);
      border-radius:50px;  
      background-repeat: no-repeat;
      background-position: bottom right;
      padding: 40px;
    }
    .text1{
      width: 1024px;
      height: 768px;
      overflow: hidden;
    }
    .menu{
      width:  768px;
      height: 768px;
      text-align: center;
    }
    .menu ul{
      list-style-type: none;
      margin: 0;
      padding: 0;
    }
    a.button{
      display: inline-block;
      width: 100%;
      border-radius: 20px;
      background-color: #000;
      color: #fff;
      text-decoration: none;
      text-align: center;
      padding: 10px 0;
      margin-bottom: 20px;
    }
    a.button:hover{
      background-color: #fff;
      color: #888;
    }
    a.button:active{
      background-color: #fff;
      color: #888;
      box-shadow: 0px 0px 50px #00d2ff;
    }

    .code{
      white-space: pre;
      font-size: 0.7em;
      background-color: #000;
      margin-bottom: 30px;
    }
    .next,.prev{
      position: absolute;
      bottom: 0px;
      right: 30px;
      display: inline-block;
      width: auto !important;
      padding: 20px 30px !important;
    }
    .prev{
      right: auto;
      left: 30px;
    }
    #page1{
      position: relative;
      height: 100%;
    }
    .slide{
      height:100%;
    }
    .menu {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 20px;
}



</style>
  </head>
  <body>
    <div id="slide" class="slide">
     
    <a-scene id="loading" stats loading-screen="dotsColor: #B8001F; backgroundColor: #FCFAEE"; XRMode: xr>

      <a-assets>

        <img id="parabol" src="assets/Nguyen_lab/parabol.JPG" />
        <img id="intersect1" src="assets/Nguyen_lab/intersect1.JPG" />
        <img id="intersect2" src="assets/Nguyen_lab/intersect2.JPG" />

        <img id="lake" src="assets/Nguyen_lab/lake.JPG" />
        <img id="TQB" src="assets/Nguyen_lab/TQB.JPG" />
        <img id="insideTQB" src="assets/Nguyen_lab/insideTQB.JPG" />

        <img id="arrow" src="assets/yajirusi.png" />
        <img id="close" src="assets/close.png" />
        <img id="info" src="assets/info.png" />

        <img id="buff" src="#arrow"> <!--probably some random bugs-->
     
        <audio id="audio1" src="assets/audio1.mp3" preload="auto"></audio>
        <a-entity id="buffer"></a-entity>
       
        <a-mixin id="astyle" animation="property:position;from: 2 1.4 -1;to:2 1.45 -1;loop:true;dir:alternate;easing: linear"></a-mixin>
        
      <a-asset-item id ="guide" src ="assets/robot_playground/robot_playground.glb"></a-asset-item>
      </a-assets>


<!-- <a-image id="lanb" src="#language" class="collidable" position="-0 1.6 -1"
rotation="0 0 0" scale=" 0.1 0.1 0" opacity="0.1" visible= "true" move-controller></a-image> -->
<a-entity gltf-model="#guide" scale =" 0.5 0.5 0.5" position ="0 1.5 -1" animation-mixer="clip: Experiment" ></a-entity>
<a-image id="infob" mixin="astyle" src="#info" class="collidable" position="-40 1 -2" 
      rotation="0 0 0" scale=" 0.1 0.1 0" opacity="0.8" visible= "true" move-controller></a-image>
  
  <a-image id="closeb" src="#close" class="collidable" position="-0.8 1.4 -1"
      rotation="0 0 0" scale=" 0.1 0.1 0" opacity="0.8" visible= "false" move-controller></a-image>
  
  <!-- <a-image id ="closeb2" src ="#close" class= "colldable" position ="-0.4 1.3 -1" ></a-image> -->
  <a-image id="right" src="#arrow" class="collidable" position="0 10000 11 " rotation="0 0 50"
      scale="3 0.5 1" opacity="0.8" visible=false move-controller></a-image>

  <a-image id="left" src="#arrow" class="collidable" position="11 110000 11" rotation="0 0 0"
      scale="3 0.5 0" opacity="0.8" visible=false move-controller></a-image>

  <a-image id="forward" src="#arrow" class="collidable" position="0 1 -1" rotation="0 0 0"
      scale=" 3 0.5 0" opacity="0.8" visible=true move-controller></a-image>

  <a-image id="back" src="#arrow" class="collidable" position="0 40000 4" rotation="0 0 0"
      scale="3 0.5 0" opacity="0.8" visible=false move-controller></a-image>
  <!-- Sky element -->

  <a-sky id="sky" src="#parabol" rotation="0 -90 0"></a-sky>

  <a-gui-flex-container 
    id = "container"
    flex-direction="column" justify-content="flexStart" align-items="normal" component-padding="0.1" opacity="0.7" width="3.5" height="4.5" 
    panel-color="#072B73" 
    panel-rounded="0.2"
    rotation="0 0 0"
	position="10 10 -1000"
  move-controller
>
<a-gui-label
 id ="Language"
 class ="collidable"
	width="2.5" height="0.75"
	value="Language"
	font-size="0.35"
  font-family ="assets/Roboto-LightItalic.ttf"
	line-height="0.8"
	letter-spacing="0"
	margin="-0.5 5 5 5"
  panel-rounded="0.2"
  opacity = "1"
  move-controller
  gui-interactable

>
</a-gui-label>

<a-gui-label
id ="Audio"
class ="collidable"
 width="2.5" height="0.75"
 value="Play audio"
 font-size="0.35"
 font-family ="assets/Roboto-LightItalic.ttf"
 line-height="0.8"
 letter-spacing="0"
 panel-rounded="0.2"
 opacity = "1"
 move-controller
 gui-interactable
 play
 margin="1 0.5 0.5 0.5"
>
</a-gui-label>

<a-gui-label
  id="Map"
  class ="collidable"
	width="2.5" height="0.75"
	value="Minimap"
	font-size="0.35"
  font-family ="assets/Roboto-LightItalic.ttf"
	line-height="0.8"
	letter-spacing="0"
  opacity = "1"
	margin="1 0.5 0.5 0.5"
>
</a-gui-label>

</a-gui-flex-container>
<!----------------------------------------------------------------------------------------------------------------------------->
<a-gui-flex-container 
id = "language_menu"
flex-direction="column" justify-content="flexStart" align-items="normal" component-padding="0.1" opacity="1" width="2.75" height="2.75" 
panel-color="#072B73" 
panel-rounded="0.2"
position="5 2.5 -1000"
move-controller
>

<a-gui-label
 id ="CH"
 class ="collidable"
	width="2.5" height="0.75"
	value="Chinese"
	font-size="0.35"
  font-family ="assets/Roboto-LightItalic.ttf"
	line-height="0.8"
	letter-spacing="0"
	margin="-0.5 5 5 5"
  panel-rounded="0.2"
  opacity = "1"
  move-controller
  gui-interactable

>
</a-gui-label>

<a-gui-label
id ="VIET"
class ="collidable"
 width="2.5" height="0.75"
 value="Vietnamese"
 font-size="0.35"
 font-family ="assets/Roboto-LightItalic.ttf"
 line-height="0.8"
 letter-spacing="0"
 panel-rounded="0.2"
 opacity = "1"
 move-controller
 gui-interactable
 margin="1 0.5 0.5 0.5"
>
</a-gui-label>

<a-gui-label
  id="EN"
  class ="collidable"
	width="2.5" height="0.75"
	value="English"
	font-size="0.35"
  font-family ="assets/Roboto-LightItalic.ttf"
	line-height="0.8"
	letter-spacing="0"
  opacity = "1"
	margin="1 0.5 0.5 0.5"
>
</a-gui-label>

</a-gui-flex-container>


<!--------------------------------------------------------------------------------------------------->
<a-gui-flex-container 
id = "map_menu"
flex-direction="row" justify-content="flexStart" align-items="normal" component-padding="0.1" opacity="1" width="2.75" height="2.75" 
panel-color="#072B73" 
position="5 2.5 -1000"
move-controller
>

<a-gui-label
 id ="mpa"
 class ="collidable"
	width="2.5" height="0.75"
	value="ParabolGate"
	font-size="0.35"
  font-family ="assets/Roboto-LightItalic.ttf"
	line-height="0.8"
	letter-spacing="0"
	margin="-0.5 5 5 5"
  panel-rounded="0.2"
  opacity = "1"
  move-controller
  gui-interactable

>
</a-gui-label>

<a-gui-label
id ="location2"
class ="collidable"
 width="2.5" height="0.75"
 value="Tien Lake"
 font-size="0.35"
 font-family ="assets/Roboto-LightItalic.ttf"
 line-height="0.8"
 letter-spacing="0"
 panel-rounded="0.2"
 opacity = "1"
 move-controller
 gui-interactable
 margin="1 0.5 0.5 0.5"
>
</a-gui-label>

<a-gui-label
  id="location3"
  class ="collidable"
	width="2.5" height="0.75"
	value="Ta Quang Buu Lib"
	font-size="0.35"
  font-family ="assets/Roboto-LightItalic.ttf"
	line-height="0.8"
	letter-spacing="0"
  opacity = "1"
	margin="1 0.5 0.5 0.5"
>
</a-gui-label>

</a-gui-flex-container>


<!---------------------------------------------------------------------------------------------------->
   <a-entity id="cameraRig">
    <a-camera id="camera">
      <a-entity cursor="rayOrigin: mouse"></a-entity> <!--ray casting from the mouse to the entity -->
      <a-entity id="right controller" laser-controls="hand:right" raycaster="objects:.collidable"
          right-controller></a-entity>
      <a-entity id="left controller" laser-controls="hand:left" raycaster="objects:.collidable"
       left-controller></a-entity>
    </a-camera>
      </a-entity>
      <!---------------------------------------------------------------------------------->

      <a-entity id="textdemo"class="text1"  htmlembed="ppu:256" position="0 2.5 -5" visible = "true">
        <div class="text">
          <svg class="corner" viewBox="0 0 65 62" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M35 3.5L65 6.5V62L0 0L35 3.5Z" fill="white"/>
          </svg>
      </div>
      </a-entity> 


<!------------------------------------------------------------------------------------------------------------------>

      <a-entity id="text1"class="screen dark text1" sound="src:#audio1;autoplay:false;refDistance:3" htmlembed="ppu:256" position="0 2.5 -5" visible = "false">
        <div id="page1" class="tab1">
          <h1> For parabolgate</h1>
          <p>HTML Embed is a component created for A-Frame. The HTML Embed component allows for arbitrary html to be inserted into your aframe scene. It allows you to update the display within A-Frame simply by manipulating the DOM as you normally would. 
          </p>
          <p>
      In addition to rendering the html to the A-Frame scene it allows for interaction. Most css pseudo selectors such as hover, active, focus and target should work with interactivity enabled without any modifications to your css. Mouse events can be attached to the html elements as usual. </p>
         </div>
      </a-entity> 

      <a-entity id="pic1" class="screen menu dark" htmlembed="ppu:256" position="-5 2.5 -5" rotation="0 45 0" visible ="false">
        <div id="page1" class="tab1">
         <img src ="assets/kateryna-kamenieva-wB5tjlA6Iv4-unsplash.jpg" width="auto" height="auto"></img> <!--please change the src = the pictures u wanna input-->
         </div>
      </a-entity> 

      <a-entity id="text2"class="screen dark text1" sound="src:#audio1;autoplay:false;refDistance:3" htmlembed="ppu:256" position="0 2.5 -5" visible = "false">
        <div id="page1" class="tab1">
          <h1>for the Lake</h1>
          <p>HTML Embed is a component created for A-Frame. The HTML Embed component allows for arbitrary html to be inserted into your aframe scene. It allows you to update the display within A-Frame simply by manipulating the DOM as you normally would. 
          </p>
          <p>
      In addition to rendering the html to the A-Frame scene it allows for interaction. Most css pseudo selectors such as hover, active, focus and target should work with interactivity enabled without any modifications to your css. Mouse events can be attached to the html elements as usual. </p>
         </div>
      </a-entity> 

      <a-entity id="pic2" class="screen menu dark" htmlembed="ppu:256" position="-5 2.5 -5" rotation="0 45 0" visible ="false">
        <div id="page1" class="tab1">
         <img src ="assets/kateryna-kamenieva-wB5tjlA6Iv4-unsplash.jpg" width="auto" height="auto"></img>
         </div>
      </a-entity> 


      <a-entity id="text3"class="screen dark text1" sound="src:#audio1;autoplay:false;refDistance:3" htmlembed="ppu:256" position="0 2.5 -5" visible = "false">
        <div id="page1" class="tab1">
          <h1>For the TQB libary</h1>
          <p>HTML Embed is a component created for A-Frame. The HTML Embed component allows for arbitrary html to be inserted into your aframe scene. It allows you to update the display within A-Frame simply by manipulating the DOM as you normally would. 
          </p>
          <p>
      In addition to rendering the html to the A-Frame scene it allows for interaction. Most css pseudo selectors such as hover, active, focus and target should work with interactivity enabled without any modifications to your css. Mouse events can be attached to the html elements as usual. </p>
         </div>
      </a-entity> 


      <a-entity id="pic3" class="screen menu dark" htmlembed="ppu:256" position="-5 2.5 -5" rotation="0 45 0" visible ="false">
        <div id="page1" class="tab1">
         <img src ="assets/kateryna-kamenieva-wB5tjlA6Iv4-unsplash.jpg" width="auto" height="auto"></img>
         </div>
      </a-entity>

      <a-entity id="text4"class="screen dark text1" sound="src:#audio1;autoplay:false;refDistance:3" htmlembed="ppu:256" position="0 2.5 -5" visible = "false">
        <div id="page1" class="tab1">
          <h1>For inside TQB libary </h1>
          <p>HTML Embed is a component created for A-Frame. The HTML Embed component allows for arbitrary html to be inserted into your aframe scene. It allows you to update the display within A-Frame simply by manipulating the DOM as you normally would. 
          </p>
          <p>
      In addition to rendering the html to the A-Frame scene it allows for interaction. Most css pseudo selectors such as hover, active, focus and target should work with interactivity enabled without any modifications to your css. Mouse events can be attached to the html elements as usual. </p>
         </div>
      </a-entity> 


      <a-entity id="pic4" class="screen menu dark" htmlembed="ppu:256" position="-5 2.5 -5" rotation="0 45 0" visible ="false">
        <div id="page1" class="tab1">
         <img src ="assets/kateryna-kamenieva-wB5tjlA6Iv4-unsplash.jpg" width="auto" height="auto"></img>
         </div>
      </a-entity>


      <!---------------------------------------------------------------------------------------------->
    </a-scene>
    </div>
 
      <!-------------------------------------------------------------------------------------------------------------------------------------->



      <div class="custom-navbar" style="overflow: hidden; flex:1 1 0%; margin-right: 0px"> 
        <div class="nav-item menu-toggle">
          <article class="fas fa-times" style="color: blue;"></article>
          <span> Menu </span>
        </div>
        
        <div class="nav-items" id="nav-items">
          <div class="nav-item">
            <button class="fas fa-globe" id="openModalBtn1"></button>
            <span> Ngôn ngữ </span>
          </div>
          
          <div class="nav-item">
            <button class="fas fa-info-circle" id="openModalBtn2"></button> 
            <span> Thông tin </span>
          </div>
      
          <div class="nav-item">
            <button class="fas fa-image" id="openModalBtn3"> </button>
            <span> Thư viện ảnh </span>
          </div>
        </div>
      </div>
      
      <div id="myInfor2" class="modal">
        <div class="modal-content">  
        <span class="inforclose-btn2"> &times; </span>
        <div class="header">
            <img src="WEBVR/Image/Logo.png" alt="Logo Hust" class="logo">
      
            <div class="header-text">
              <h2> ĐẠI HỌC </h2>
              <h2> BÁCH KHOA HÀ NỘI </h2>
              <p> HANOI UNIVERSITY OF SCIENCE AND TECHNOLOGY</p>
            </div>
        </div>
      
        <div>
          <h3> I. Giới thiệu chung </h3>
          <p> Đại học Bách khoa Hà Nội (tên tiếng Anh Hanoi University of Science and Technology – viết tắt HUST) được thành lập năm 1956. Đây là trường đại học kỹ thuật đầu tiên của nước ta có nhiệm vụ đào tạo kỹ sư công nghiệp cho công cuộc xây dựng CNXH ở miền Bắc và đấu tranh giải phóng miền Nam.</p> 
          <p>Đại học Bách khoa Hà Nội là trung tâm đào tạo, nghiên cứu khoa học và công nghệ đa ngành, đa lĩnh vực; kết hợp chặt chẽ giữa đào tạo với nghiên cứu khoa học nhằm tạo nguồn nhân lực chất lượng cao và bồi dưỡng nhân tài khoa học, công nghệ; định hướng phát triển thành đại học nghiên cứu ngang tầm với các đại học có uy tín trong khu vực và trên thế giới.</p> 
      </div>
        <div class="footer">
          <img src="WEBVR/Image/logo-hust-02.png" alt="Logo Hust" class="footer-logo">
            <p>
                  Bản quyền thuộc về Đại học Bách khoa Hà Nội<br>
                  Địa chỉ: Số 1 Đại Cồ Việt, Hai Bà Trưng, Hà Nội<br>
                  Điện thoại: 024 3869 4242
            </p>
        </div>
        
        
        </div>
      </div>
       
      
      
      <div id="myInfor3" class="modal">
      <div class="modal-content">
        <span class="inforclose-btn3"> &times; </span>
        <h2 style="position:fixed; font-size: 20px; text-align:center; font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; "> Thư Viện Hình Ảnh </h2>
      
        <div class="image-gallery">
          <!-- Showing image -->
          <div class="main-image">
              <img id="mainImage" src="WEBVR/Image/IMG.png" alt="Main Image">
              <p id="imageCaption"> Bách Khoa Hà Nội </p>
          </div>
          
          <!-- otherimage -->
          <div class="thumbnail-list">
              <img src="WEBVR/Image/Img9.webp" alt="Thumbnail 1" 
                   data-caption="Cổng Parabol" onclick="changeImage(this)">
              <img src="WEBVR/Image/Img2.jpg" alt="Thumbnail 2" 
                   data-caption="Lễ Trao Bằng Tiến sĩ, Thạc sĩ Năm 2024" onclick="changeImage(this)">
              <img src="WEBVR/Image/Img3.jpg" alt="Thumbnail 3" 
                   data-caption="Kỷ niệm 69 năm thành lập Bách Khoa " onclick="changeImage(this)">
              <img src="WEBVR/Image/Img4.jpg" alt="Thumbnail 4" 
                   data-caption="Hội thao Công Đoàn Bách Khoa Năm 2024" onclick="changeImage(this)">
              <img src="WEBVR/Image/Img5.jpg" alt="Thumbnail 5" 
                   data-caption="HUST- Chào Tân K69" onclick="changeImage(this)">
              <img src="WEBVR/Image/Img6.webp" alt="Thumbnail 6" 
                   data-caption="Hội trường C2" onclick="changeImage(this)">
              <img src="WEBVR/Image/Img7.webp" alt="Thumbnail 7" 
                   data-caption="Tòa nhà D3-5" onclick="changeImage(this)">
              <img src="WEBVR/Image/Img8.webp" alt="Thumbnail 8" 
                   data-caption="Bản đồ Bách Khoa" onclick="changeImage(this)">
              <img src="WEBVR/Image/Img10.webp" alt="Thumbnail 9" 
                   data-caption="Thư Viện Tạ Quang Bửu" onclick="changeImage(this)">
            
        </div>
      </div>  
      </div>
      </div>
      
      <div id="myInfor1" class="modal">
      <div class="language-items" id="language-items">
        <span class="inforclose-btn1" > &times; </span>
        <div class="language-item">
          <button onclick="location.href='http://0.0.0.0:8000/demo_viet.html'">Vietnamese</button>
        </div>
        <div class="language-item">
          <button onclick="location.href='http://0.0.0.0:8000/demo_eng.html'">English</button>
        </div>
        <div class="language-item">
          <button onclick="location.href='http://0.0.0.0:8000/demo_chin.html'">Chinese</button>
        </div>
      </div>
      </div>
        
    <script>
     

      let current = "#parabol";
    let map_right = new Map([
  ["#intersect2","#lake"], 
  ["#TQB", "#insideTQB"],
  ["#lake", "No_data"],
  ["#parabol", "No_data"],
  ["#insideTQB", "No_data"],
  ["#intersect1", "No_data"]
]);

let map_left = new Map([
  ["#lake", "#intersect2"], 
  ["#insideTQB", "#TQB"],
  ["#intersect2", "No_data"],
  ["#parabol", "No_data"],
  ["#TQB", "No_data"],
  ["#intersect1", "No_data"]
]);

let map_forward = new Map([
  ["#parabol", "#intersect1"], 
  ["#intersect1","#intersect2"],
  ["#intersect2", "#TQB"],
  ["#lake", "No_data"],
  ["#insideTQB", "No_data"],
  ["#TQB", "No_data"]
]);

let map_back = new Map([
  ["#parabol", "No_data"], 
  ["#intersec1", "#parabol"],
  ["#intersect2", "#intersect1"],
  ["#lake", "No_data"],
  ["#insideTQB", "No_data"],
  ["#TQB", "#intersect2"]
]);


      const arrow_right = document.getElementById("right");
      arrow_right.addEventListener('error', (e) => {
          console.error('Error loading arrow image', e);
      }); //debug 
      const arrow_left = document.getElementById("left");
      const arrow_forward = document.getElementById("forward");
      const arrow_back = document.getElementById("back");

      arrow_right.addEventListener("raycaster-intersected", (event) => {
          arrow_right.setAttribute("opacity", 1);
          arrow_left.setAttribute("opacity", 0.8);
          arrow_forward.setAttribute("opacity", 0.8);
          arrow_back.setAttribute("opacity", 0.8);
      })
      arrow_right.addEventListener("raycaster-intersected-cleared", (event) => {
          arrow_right.setAttribute("opacity", 0.8);
      })
      arrow_back.addEventListener("raycaster-intersected-cleared", (event) => {
          arrow_back.setAttribute("opacity", 0.8);
      })
      arrow_back.addEventListener("raycaster-intersected", (event) => {
          arrow_back.setAttribute("opacity", 1);
          arrow_right.setAttribute("opacity", 0.8);
          arrow_left.setAttribute("opacity", 0.8);
          arrow_forward.setAttribute("opacity", 0.8);


      })
      arrow_left.addEventListener("raycaster-intersected", (event) => {
          arrow_left.setAttribute("opacity", 1);
          arrow_back.setAttribute("opacity", 0.8);
          arrow_right.setAttribute("opacity", 0.8);
          arrow_forward.setAttribute("opacity", 0.8);
      })
      arrow_left.addEventListener("raycaster-intersected-cleared", (event) => {
          arrow_left.setAttribute("opacity", 0.8);
      })

      arrow_forward.addEventListener("raycaster-intersected", (event) => {
          arrow_right.setAttribute("opacity", 0.8);
          arrow_left.setAttribute("opacity", 0.8);
          arrow_forward.setAttribute("opacity", 1);
          arrow_back.setAttribute("opacity", 0.8);
      })
      arrow_forward.addEventListener("raycaster-intersected-cleared", (event) => {
          arrow_forward.setAttribute("opacity", 0.8);

      })
      const info_icon = document.getElementById("infob");
      info_icon.addEventListener("raycaster-intersected", (event) => {
          console.log("Raycaster intersected with info_button");
          info_icon.setAttribute("opacity", 1);
          info_icon.setAttribute("scale", "0.13 0.13 0");
          document.querySelector('#infob').emit('trigger');


      })
      info_icon.addEventListener("raycaster-intersected-cleared", (event) => {
          info_icon.setAttribute("opacity", "0.8");
      })


      const close_icon = document.getElementById("closeb");
      close_icon.addEventListener("raycaster-intersected", (event)=>{
        console.log("Raycaster intersected with close_button");
          close_icon.setAttribute("opacity", 1);
          close_icon.setAttribute("scale", "0.13 0.13 0");
      })

      close_icon.addEventListener("raycaster-intersected-cleared", (event) => {
          close_icon.setAttribute("opacity", "0.8");
      })

      const label2 = document.getElementById("Audio"); // Note the typo in ID ("lable2")
      const label3 = document.getElementById("Map");
      const label1 = document.getElementById("Language");
      const language = document.getElementById("language_menu");
      const map_menu = document.getElementById("map_menu");
      const locations = document.querySelectorAll('[id^="location"]');

      label1.addEventListener('click', (e)=>{
        console.log("clicked language");

          language.setAttribute("position", "-3 2.5 -6");
          document.getElementById("CH").addEventListener('click', (e)=>{
            window.location.replace("http://0.0.0.0:8000/testchin.html")});
          document.getElementById("EN").addEventListener('click', (e)=>{
            window.location.replace("http://0.0.0.0:8000/testen.html")});
          document.getElementById("VIET").addEventListener('click', (e)=>{
            window.location.replace("http://0.0.0.0:8000/testviet.html")});
          
       })

        label1.addEventListener('triggerdown', (e)=>{
          console.log('clicked language');

          language.setAttribute("position", "-3 2.5 1")
          document.getElementById("CH").addEventListener('triggerdown', (e)=>{ //i haven't duplicate the files for translated yet so only chinese works 
           window.location.replace("http://0.0.0.0:8000/testchin.html")});
          document.getElementById("EN").addEventListener('triggerdown', (e)=>{
            window.location.replace("http://0.0.0.0:8000/testen.html")});
          document.getElementById("VIET").addEventListener('triggerdown', (e)=>{
            window.location.replace("http://0.0.0.0:8000/testviet.html")});
          
       })
       label3.addEventListener('click', (e)=>{
        console.log('clicked minimap');
        map_menu.setAttribute("position","-1 2.5 -6");
       })
       locations.forEach(location => {
    location.addEventListener('click', function(event){
        switch(location.id) {  // Compare the id of the location element
            case "location1" :
                console.log("changed to location1");
                current = "#Nguyen_lab#1";
                sky.setAttribute("src", current);
                break;
            case "location2" :
                console.log("changed to location2");
                current = "#lake";
                sky.setAttribute("src", current);
                break;
             case "location3" :
                console.log("changed to location2");
                current = "#TQB";
                sky.setAttribute("src", current);
                break;
            default:
                console.log("Unknown location");
        }
    });
});

var container1 = document.querySelector(".text");
//SPEED IS THE DESIRED DELAY, ALL ARE IN MILLISECONDS
var speeds = {
   pause: 500, //Higher number = longer delay
   slow: 120,
   normal: 90,
   fast: 40,
   superFast: 10
};
//ARRAYS OF SENTECES IN A DIALOGUE ( CAN MAKE MULTIPLE VALUES )
var textLines = [
  
   { speed: speeds.slow, string: "Oh, hello!" },
   { speed: speeds.pause, string: "", pause: true },
   { speed: speeds.normal, string: "Have you seen my pet" },
   { speed: speeds.fast, string: "frog", classes: ["green"] },
   { speed: speeds.normal, string: "around?" }
];


var characters = [];

textLines.forEach((line, index) => { //FOR EACH SETENCES
   if (index < textLines.length - 1) {
      line.string += " "; //Add a space between lines
   }

   line.string.split("").forEach((character) => { //SPLIT THE CHARACTERS AND PUT THEM IN THE ARRAYS CHARACTERS
      var span = document.createElement("span");
      span.textContent = character;
      container1.appendChild(span);
      characters.push({   //INCLUDE THE INFO OF IT OFCOURSE 
         span: span,
         isSpace: character === " " && !line.pause,  // IF THAT LETTER IS A " " AND NOT THE END OF LINE : INDICATE THAT IT'S ISPACE IS TRUE 
         delayAfter: line.speed, 
         classes: line.classes || [] //EVEN IF THAT LINE IS DEFINED OR NOT THE CLASS PROPERTY IS ALWAYS WORK 
      });
   });
});

function revealOneCharacter(list) {    //FUNCTION TO DISPLAY EACH CHARACTERS ONE BY ONE 
   var next = list.splice(0, 1)[0];
   next.span.classList.add("revealed"); //ADD THE REVEALED CLASS TO THE NEXT TO BE DISPLAYED CHARACTER
   next.classes.forEach((c) => { //ADD ALL OF THE CLASSES OF THE PREVIOUS CHARACTERS TO THE NEXT CHARACTERS
      next.span.classList.add(c);
   });
   var delay = next.isSpace && !next.pause ? 0 : next.delayAfter;
// IF THE NEXT LETTER IS SPACE ( LOCALLY IN THE SENTENCE) AND NOT THE PAUSE (BETWEEN THE LINES ), THERE WILL BE NO DISPLAY TO DISPLAY IT , OTHER WISE, WAIT WITH THE DEFINED SPEED 
   if (list.length > 0) { //RECURSIVE CALL 
      setTimeout(function () {
         revealOneCharacter(list);
      }, delay);
   }
}

//Kick it off
setTimeout(() => { //start automatically 
   revealOneCharacter(characters);   
}, 600)


  </script>
  </body>
</html>
